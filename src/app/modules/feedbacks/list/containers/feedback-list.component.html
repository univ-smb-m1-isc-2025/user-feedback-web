<div class="page-header">
  <div class="header-left">
    <div class="back-btn" (click)="navigateToGroupList()">
      <mat-icon>arrow_back</mat-icon>
    </div>
    <h1>{{ groupDetails()?.name }}</h1>
  </div>
  <div class="header-actions">
    <button mat-flat-button class="add-member-btn" (click)="addMember()">
      <mat-icon>person_add</mat-icon>
      Ajouter des membres
    </button>
    <button mat-flat-button (click)="addFeedback()">
      <mat-icon>add</mat-icon>
      Ajouter un feedback
    </button>
  </div>
</div>

@if (loading()) {
  <div class="loader-container">
    <uf-loader [diameter]="50" />
  </div>
} @else {
  <div class="feedbacks">
    @for (feedback of feedbackListSignal(); track feedback.id) {
      <uf-feedback-list-item
        [feedback]="feedback"
        [user]="userDetails()"
        (getComments)="getComments($event)"
        (postComment)="postComment($event, feedback.id)"
        (upVoteComment)="upVoteComment($event, feedback.id)"
        (downVoteComment)="downVoteComment($event, feedback.id)"
        (upVoteFeedback)="upVoteFeedback($event)"
        (downVoteFeedback)="downVoteFeedback($event)"
        (update)="updateFeedback($event)"
        (delete)="deleteFeedback($event)"
      />
    } @empty {
      <div class="empty-state">
        <mat-icon>comment_bank</mat-icon>
        <h3>Aucun feedback pour le moment</h3>
        <p>Soyez le premier Ã  partager votre avis dans ce groupe</p>
        <button mat-flat-button color="primary" (click)="addFeedback()">
          <mat-icon>add</mat-icon>
          Ajouter un feedback
        </button>
      </div>
    }
  </div>
}
